{"version":3,"sources":["visualization.js"],"names":["document","addEventListener","width","height","container","d3","select","svg","append","attr","style","json","then","cantons","csv","yesVotes","tooltip","projection","geoAlbers","center","rotate","parallels","scale","pathGenerator","geoPath","globe","selectAll","data","features","enter","d","on","html","ja_anteil","properties","name","event","pageX","pageY","yescount","find","yes","id","colorScale","scaleThreshold","domain","range","console","log","results"],"mappings":"AACAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAElD,MAAMC,KAAK,GAAG,GAAd;AACA,MAAMC,MAAM,GAAG,GAAf;AAEA,MAAMC,SAAS,GAAGC,EAAE,CAACC,MAAH,CAAU,MAAV,CAAlB;AAEA,MAAMC,GAAG,GAAGH,SAAS,CAACI,MAAV,CAAiB,KAAjB,EACXC,IADW,CACN,OADM,EACGP,KADH,EAEXO,IAFW,CAEN,QAFM,EAEIN,MAFJ,EAGXO,KAHW,CAGL,kBAHK,EAGe,SAHf,CAAZ;AAKAL,EAAAA,EAAE,CAACM,IAAH,CAAQ,eAAR,EACGC,IADH,CACQ,UAAAC,OAAO,EAAI;AAEfR,IAAAA,EAAE,CAACS,GAAH,CAAO,iBAAP,EACGF,IADH,CACQ,UAAAG,QAAQ,EAAI;AAEhB,UAAMC,OAAO,GAAGZ,SAAS,CAACI,MAAV,CAAiB,KAAjB,EACfE,KADe,CACT,SADS,EACE,CADF,EAEfA,KAFe,CAET,UAFS,EAEG,OAFH,EAGfA,KAHe,CAGT,YAHS,EAGK,uBAHL,EAIfA,KAJe,CAIT,SAJS,EAIE,QAJF,EAKfA,KALe,CAKT,gBALS,EAKS,MALT,CAAhB;AAOA,UAAMO,UAAU,GAAGZ,EAAE,CAACa,SAAH,GAClBC,MADkB,CACX,CAAC,CAAD,EAAI,IAAJ,CADW,EAElBC,MAFkB,CAEX,CAAC,CAAC,CAAF,EAAK,CAAL,EAAQ,CAAR,CAFW,EAGlBC,SAHkB,CAGR,CAAC,EAAD,EAAK,EAAL,CAHQ,EAIlBC,KAJkB,CAIZ,KAJY,CAAnB;AAMA,UAAMC,aAAa,GAAGlB,EAAE,CAACmB,OAAH,GAAaP,UAAb,CAAwBA,UAAxB,CAAtB;AAEA,UAAMQ,KAAK,GAAGlB,GAAG,CAACmB,SAAJ,CAAc,MAAd,EACbC,IADa,CACRd,OAAO,CAACe,QADA,EAEbC,KAFa,GAGbrB,MAHa,CAGN,MAHM,EAIbC,IAJa,CAIR,GAJQ,EAIH,UAAAqB,CAAC;AAAA,eAAIP,aAAa,CAACO,CAAD,CAAjB;AAAA,OAJE,EAKbC,EALa,CAKV,OALU,EAKD,UAASD,CAAT,EAAY;AACvBd,QAAAA,OAAO,CACNN,KADD,CACO,SADP,EACkB,CADlB,EAECsB,IAFD,CAEMF,CAAC,CAACG,SAFR;AAGD,OATa,EAUbF,EAVa,CAUV,YAVU,EAUI,UAASD,CAAT,EAAY;AAC5Bd,QAAAA,OAAO,CACNN,KADD,CACO,SADP,EACkB,CADlB,EAECsB,IAFD,CAEMF,CAAC,CAACI,UAAF,CAAaC,IAFnB;AAGD,OAda,EAebJ,EAfa,CAeV,WAfU,EAeG,YAAW;AAC1Bf,QAAAA,OAAO,CACNN,KADD,CACO,MADP,EACeL,EAAE,CAAC+B,KAAH,CAASC,KAAT,GAAiB,CAAjB,GAAqB,IADpC,EAEC3B,KAFD,CAEO,KAFP,EAEcL,EAAE,CAAC+B,KAAH,CAASE,KAAT,GAAiB,CAAjB,GAAqB,IAFnC;AAGD,OAnBa,EAoBbP,EApBa,CAoBV,YApBU,EAoBI,YAAW;AAC3Bf,QAAAA,OAAO,CAACN,KAAR,CAAc,SAAd,EAAyB,CAAzB;AACD,OAtBa,EAuBbD,IAvBa,CAuBR,MAvBQ,EAuBA,SAvBA,EAwBbA,IAxBa,CAwBR,QAxBQ,EAwBE,SAxBF,EAyBbA,IAzBa,CAyBR,MAzBQ,EAyBA,UAAUqB,CAAV,EAAa;AAC3B,YAAMS,QAAQ,GAAGxB,QAAQ,CAACyB,IAAT,CAAc,UAAAC,GAAG;AAAA,iBAAIA,GAAG,CAACC,EAAJ,IAAUZ,CAAC,CAACI,UAAF,CAAaQ,EAA3B;AAAA,SAAjB,CAAjB;AAEA,YAAMC,UAAU,GAAGtC,EAAE,CAACuC,cAAH,GAChBC,MADgB,CACT,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,EAAV,EAAa,EAAb,EAAgB,EAAhB,EAAmB,EAAnB,EAAsB,EAAtB,EAAyB,EAAzB,EAA4B,GAA5B,CADS,EAEhBC,KAFgB,CAEV,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EAAwD,SAAxD,EAAmE,SAAnE,EAA8E,SAA9E,EAAyF,SAAzF,EAAoG,SAApG,CAFU,CAAnB;AAIA,eAAOH,UAAU,CAACJ,QAAQ,CAACN,SAAV,CAAjB;AAEC,OAlCa,CAAd;AAoCAc,MAAAA,OAAO,CAACC,GAAR,CAAYnC,OAAO,CAACe,QAApB;AAEAmB,MAAAA,OAAO,CAACC,GAAR,CAAYjC,QAAZ;AAEAgC,MAAAA,OAAO,CAACC,GAAR,CAAYjC,QAAQ,CAAC,CAAD,CAAR,CAAYkB,SAAxB;AAEA;;AAEA,UAAMgB,OAAO,GAAG1C,GAAG,CAACmB,SAAJ,CAAc,QAAd,EACbC,IADa,CACRZ,QADQ,EAEbc,KAFa,GAGbrB,MAHa,CAGN,QAHM,EAIbC,IAJa,CAIR,GAJQ,EAIH,UAAAqB,CAAC;AAAA,eAAIP,aAAa,CAACO,CAAD,CAAjB;AAAA,OAJE,EAKbC,EALa,CAKV,OALU,EAKD,UAAAD,CAAC,EAAI;AAChBiB,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBlB,CAAC,CAACG,SAAxB;AACD,OAPa,EAQbF,EARa,CAQV,OARU,EAQD,UAASD,CAAT,EAAY;AACvBd,QAAAA,OAAO,CACNN,KADD,CACO,SADP,EACkB,CADlB,EAECsB,IAFD,CAEMF,CAAC,CAACG,SAFR;AAGD,OAZa,CAAhB;AAcA;;AAGE;;;AAIF;AAEA;AAEA;AAED,KAzFH;AA0FD,GA7FH;AA8FD,CA1GD","file":"visualization.6e720a66.js","sourceRoot":"..","sourcesContent":["\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\n  const width = 740\n  const height = 500\n\n  const container = d3.select(\"#viz\")\n\n  const svg = container.append(\"svg\")\n  .attr(\"width\", width)\n  .attr(\"height\", height)\n  .style(\"background-color\", \"#f5f3ef\")\n\n  d3.json(\"/cantons.json\")\n    .then(cantons => {\n\n      d3.csv(\"/referendum.csv\")\n        .then(yesVotes => {\n\n          const tooltip = container.append(\"div\")\n          .style(\"opacity\", 0)\n          .style(\"position\", \"fixed\")\n          .style(\"background\", \"rgba(255,255,255,0.8)\")\n          .style(\"padding\", \"0.5rem\")\n          .style(\"pointer-events\", \"none\")\n\n          const projection = d3.geoAlbers()\n          .center([0, 46.7])\n          .rotate([-9, 0, 0])\n          .parallels([40, 50])\n          .scale(12500)\n\n          const pathGenerator = d3.geoPath().projection(projection)\n\n          const globe = svg.selectAll(\"path\")\n          .data(cantons.features)\n          .enter()\n          .append(\"path\")\n          .attr(\"d\", d => pathGenerator(d))\n          .on(\"click\", function(d) {\n            tooltip\n            .style(\"opacity\", 1)\n            .html(d.ja_anteil)\n          })\n          .on(\"mouseenter\", function(d) {\n            tooltip\n            .style(\"opacity\", 1)\n            .html(d.properties.name)\n          })\n          .on(\"mousemove\", function() {\n            tooltip\n            .style(\"left\", d3.event.pageX + 5 + \"px\")\n            .style(\"top\", d3.event.pageY + 5 + \"px\")\n          })\n          .on(\"mouseleave\", function() {\n            tooltip.style(\"opacity\", 0)\n          })\n          .attr(\"fill\", \"#ceccc0\")\n          .attr(\"stroke\", \"#f5f3ef\")\n          .attr(\"fill\", function (d) {\n          const yescount = yesVotes.find(yes => yes.id == d.properties.id);\n\n          const colorScale = d3.scaleThreshold()\n            .domain([30,35,40,45,50,55,60,65,70,100])\n            .range([\"#d0001b\", \"#e0513c\", \"#ee7e5f\", \"#f7a684\", \"#fdceaa\", \"#d0e0af\", \"#a6c185\", \"#7da35b\", \"#538633\", \"#256900\"])\n\n          return colorScale(yescount.ja_anteil)\n\n          });\n\n          console.log(cantons.features)\n\n          console.log(yesVotes)\n\n          console.log(yesVotes[1].ja_anteil)\n\n          /* results */\n\n          const results = svg.selectAll(\"circle\")\n            .data(yesVotes)\n            .enter()\n            .append(\"circle\")\n            .attr(\"d\", d => pathGenerator(d))\n            .on(\"click\", d => {\n              console.log(\"Data: \", d.ja_anteil)\n            })\n            .on(\"click\", function(d) {\n              tooltip\n              .style(\"opacity\", 1)\n              .html(d.ja_anteil)\n            })\n\n          /* results */\n\n\n            /*\n            return yescount.ja_anteil >= 50 ? \"#76c770\" : \"#cb3535\";\n            */\n\n          // ====================\n\n          // Visualisierung...\n\n          // ====================\n\n        })\n    })\n})\n"]}